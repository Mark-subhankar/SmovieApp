{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/subhankar/Desktop/React-Project-MovieApp/moviehub/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/subhankar/Desktop/React-Project-MovieApp/moviehub/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/subhankar/Desktop/React-Project-MovieApp/moviehub/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/subhankar/Desktop/React-Project-MovieApp/moviehub/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import\"../ComponentStyle/MovieListStyle.css\";import Card from\"./Card\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MovieCategory=function MovieCategory(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];var category=props.category,with_original_language=props.with_original_language;// Creating DisStructuring\nvar fetchMovies=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var apiKey,url,response,data,results,total_pages;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:apiKey=\"4eee0494b9dc4b3dd0c76812804c13c1\";url=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&language=en-US&sort_by=popularity.desc&page=1&with_original_language=\").concat(with_original_language,\"&page=\").concat(page);_context.prev=2;_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;results=data.results,total_pages=data.total_pages;setMovies(function(prevMovies){return[].concat(_toConsumableArray(prevMovies),_toConsumableArray(results));});setTotalPages(total_pages);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.error(\"Error fetching movies:\",_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[2,14]]);})),[page,with_original_language]);var fetchMoreMovies=function fetchMoreMovies(){if(page<totalPages){setPage(page+1);}};useEffect(function(){fetchMovies();},[fetchMovies]);return/*#__PURE__*/_jsxs(InfiniteScroll,{dataLength:movies.length,next:fetchMoreMovies,hasMore:page<totalPages,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"movie__list\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"list__title\",children:[\" \",\" \",\" \",(category?category:\"POPULAR\").toUpperCase(),\" \",\" \",\" \"]}),\" \",\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"list__cards\",children:[\" \",\" \",\" \",movies.map(function(movie){return/*#__PURE__*/_jsx(Card,{movie:movie},movie.poster_path);}),\" \",\" \",\" \"]}),\" \",\" \"]}),\" \",\" \"]});};export default MovieCategory;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Card","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","MovieCategory","props","_useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","page","setPage","_useState5","_useState6","totalPages","setTotalPages","category","with_original_language","fetchMovies","_asyncToGenerator","_regeneratorRuntime","mark","_callee","apiKey","url","response","data","results","total_pages","wrap","_callee$","_context","prev","next","concat","fetch","sent","json","prevMovies","_toConsumableArray","t0","console","error","stop","fetchMoreMovies","dataLength","length","hasMore","children","className","toUpperCase","map","movie","poster_path"],"sources":["C:/Users/subhankar/Desktop/React-Project-MovieApp/moviehub/src/Component/MovieCategory.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport \"../ComponentStyle/MovieListStyle.css\";\r\nimport Card from \"./Card\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst MovieCategory = (props) => {\r\n    const [movies, setMovies] = useState([]);\r\n    const [page, setPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const { category, with_original_language } = props; // Creating DisStructuring\r\n\r\n    const fetchMovies = useCallback(async() => {\r\n        const apiKey = \"4eee0494b9dc4b3dd0c76812804c13c1\";\r\n        const url = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=en-US&sort_by=popularity.desc&page=1&with_original_language=${with_original_language}&page=${page}`;\r\n\r\n        try {\r\n            const response = await fetch(url);\r\n            const data = await response.json();\r\n            const { results, total_pages } = data;\r\n\r\n            setMovies((prevMovies) => [...prevMovies, ...results]);\r\n            setTotalPages(total_pages);\r\n        } catch (error) {\r\n            console.error(\"Error fetching movies:\", error);\r\n        }\r\n    }, [page, with_original_language]);\r\n\r\n    const fetchMoreMovies = () => {\r\n        if (page < totalPages) {\r\n            setPage(page + 1);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchMovies();\r\n    }, [fetchMovies]);\r\n\r\n    return ( <\r\n        InfiniteScroll dataLength = { movies.length }\r\n        next = { fetchMoreMovies }\r\n        hasMore = { page < totalPages } >\r\n        <\r\n        div className = \"movie__list\" >\r\n        <\r\n        h2 className = \"list__title\" > { \" \" } {\r\n            (category ? category : \"POPULAR\").toUpperCase() } { \" \" } <\r\n        /h2>{\" \"} <\r\n        div className = \"list__cards\" > { \" \" } {\r\n            movies.map((movie) => ( <\r\n                Card key = { movie.poster_path }\r\n                movie = { movie }\r\n                />\r\n            ))\r\n        } { \" \" } <\r\n        /div>{\" \"} <\r\n        /div>{\" \"} <\r\n        /InfiniteScroll>\r\n    );\r\n};\r\n\r\nexport default MovieCategory;"],"mappings":"wlBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,cAAc,KAAM,iCAAiC,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAE7D,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC7B,IAAAC,SAAA,CAA4BV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAwBf,QAAQ,CAAC,CAAC,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA5BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAoCnB,QAAQ,CAAC,CAAC,CAAC,CAAAoB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAxCE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,GAAQ,CAAAG,QAAQ,CAA6Bd,KAAK,CAA1Cc,QAAQ,CAAEC,sBAAsB,CAAKf,KAAK,CAAhCe,sBAAsB,CAAY;AAEpD,GAAM,CAAAC,WAAW,CAAGxB,WAAW,cAAAyB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,MAAA,CAAAC,GAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAC,OAAA,CAAAC,WAAA,QAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACtBV,MAAM,CAAG,kCAAkC,CAC3CC,GAAG,wDAAAU,MAAA,CAA0DX,MAAM,2EAAAW,MAAA,CAAyEjB,sBAAsB,WAAAiB,MAAA,CAASxB,IAAI,EAAAqB,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAG1J,CAAAE,KAAK,CAACX,GAAG,CAAC,QAA3BC,QAAQ,CAAAM,QAAA,CAAAK,IAAA,CAAAL,QAAA,CAAAE,IAAA,SACK,CAAAR,QAAQ,CAACY,IAAI,CAAC,CAAC,QAA5BX,IAAI,CAAAK,QAAA,CAAAK,IAAA,CACFT,OAAO,CAAkBD,IAAI,CAA7BC,OAAO,CAAEC,WAAW,CAAKF,IAAI,CAApBE,WAAW,CAE5BrB,SAAS,CAAC,SAAC+B,UAAU,WAAAJ,MAAA,CAAAK,kBAAA,CAASD,UAAU,EAAAC,kBAAA,CAAKZ,OAAO,IAAC,CAAC,CACtDZ,aAAa,CAACa,WAAW,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,aAE3BU,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAAX,QAAA,CAAAS,EAAO,CAAC,CAAC,yBAAAT,QAAA,CAAAY,IAAA,MAAArB,OAAA,iBAEtD,GAAE,CAACZ,IAAI,CAAEO,sBAAsB,CAAC,CAAC,CAElC,GAAM,CAAA2B,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC1B,GAAIlC,IAAI,CAAGI,UAAU,CAAE,CACnBH,OAAO,CAACD,IAAI,CAAG,CAAC,CAAC,CACrB,CACJ,CAAC,CAEDlB,SAAS,CAAC,UAAM,CACZ0B,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,mBAASpB,KAAA,CACLF,cAAc,EAACiD,UAAU,CAAKvC,MAAM,CAACwC,MAAQ,CAC7Cb,IAAI,CAAKW,eAAiB,CAC1BG,OAAO,CAAKrC,IAAI,CAAGI,UAAY,CAAAkC,QAAA,eAC/BlD,KAAA,QACImD,SAAS,CAAG,aAAa,CAAAD,QAAA,eAC7BlD,KAAA,OACGmD,SAAS,CAAG,aAAa,CAAAD,QAAA,EAAE,GAAC,CAAE,GAAG,CAAE,GAAC,CACnC,CAAChC,QAAQ,CAAGA,QAAQ,CAAG,SAAS,EAAEkC,WAAW,CAAC,CAAC,CAAE,GAAC,CAAE,GAAG,CAAE,GAAC,EAC3D,CAAC,CAAC,GAAG,CAAC,GAAC,cAAApD,KAAA,QACNmD,SAAS,CAAG,aAAa,CAAAD,QAAA,EAAE,GAAC,CAAE,GAAG,CAAE,GAAC,CACpC1C,MAAM,CAAC6C,GAAG,CAAC,SAACC,KAAK,qBAAOpD,IAAA,CACpBL,IAAI,EACJyD,KAAK,CAAKA,KAAO,EADJA,KAAK,CAACC,WAElB,CAAC,EACL,CAAC,CACL,GAAC,CAAE,GAAG,CAAE,GAAC,EACN,CAAC,CAAC,GAAG,CAAC,GAAC,EACP,CAAC,CAAC,GAAG,CAAC,GAAC,EACI,CAAC,CAExB,CAAC,CAED,cAAe,CAAApD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}